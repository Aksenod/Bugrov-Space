import{r as o,j as e}from"./markdown-vendor-CiFSpwUK.js";import{X as y,g as E,F as C,C as D,r as T}from"./index-Cwby3Rey.js";import{U as k}from"./upload-D3I9Acxx.js";import"./react-vendor-OvXVS5lI.js";import"./syntax-highlighter-C2HkY6UG.js";const z=2*1024*1024,h={"text/plain":[".txt"],"text/markdown":[".md"]},F=()=>Object.values(h).flat().join(", "),_=({isOpen:u,onClose:b,onUpload:d,isUploading:s=!1})=>{const[p,a]=o.useState(!1),[c,l]=o.useState(null),x=o.useRef(null);if(!u||typeof document>"u")return null;const m=t=>{if(l(null),t.length===0)return l("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω —Ñ–∞–π–ª"),!1;for(let r=0;r<t.length;r++){const i=t[r];if(i.size>z)return l(`–§–∞–π–ª "${i.name}" –ø—Ä–µ–≤—ã—à–∞–µ—Ç –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä 2MB`),!1;const N="."+i.name.split(".").pop()?.toLowerCase();if(!Object.values(h).flat().includes(N))return l(`–§–∞–π–ª "${i.name}" –∏–º–µ–µ—Ç –Ω–µ–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–π —Ñ–æ—Ä–º–∞—Ç. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ: TXT, MD.`),!1}return!0},n=t=>{t.preventDefault(),t.stopPropagation(),t.type==="dragenter"||t.type==="dragover"?a(!0):t.type==="dragleave"&&a(!1)},g=t=>{if(t.preventDefault(),t.stopPropagation(),a(!1),t.dataTransfer.files&&t.dataTransfer.files.length>0){const r=t.dataTransfer.files;m(r)&&d(r)}},v=t=>{if(t.target.files&&t.target.files.length>0){const r=t.target.files;m(r)&&d(r)}},f=()=>{x.current?.click()},j=()=>{s||(l(null),b())},w=e.jsx("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4",children:e.jsxs("div",{className:"bg-gradient-to-br from-gray-900 via-gray-900 to-indigo-950/30 rounded-3xl shadow-2xl border border-white/10 max-w-2xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"p-6 border-b border-white/10 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-indigo-500/20 rounded-xl text-indigo-400",children:e.jsx(k,{size:24})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"–ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–∞–π–ª—ã"}),e.jsx("p",{className:"text-sm text-white/50 mt-0.5",children:"–î–æ–±–∞–≤—å—Ç–µ —Ñ–∞–π–ª—ã –≤ –ø—Ä–æ–µ–∫—Ç"})]})]}),e.jsx("button",{onClick:j,disabled:s,className:"p-2 text-white/60 hover:text-white hover:bg-white/10 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"–ó–∞–∫—Ä—ã—Ç—å",children:e.jsx(y,{size:24})})]}),e.jsxs("div",{className:"p-6 flex-1 overflow-y-auto",children:[e.jsxs("div",{onDragEnter:n,onDragLeave:n,onDragOver:n,onDrop:g,className:`border-2 border-dashed rounded-2xl p-12 text-center transition-all ${p?"border-indigo-400 bg-indigo-500/10":"border-white/20 hover:border-white/30 hover:bg-white/5"} ${s?"opacity-50 cursor-not-allowed":"cursor-pointer"}`,onClick:s?void 0:f,children:[e.jsx("input",{ref:x,type:"file",multiple:!0,accept:F(),onChange:v,className:"hidden",disabled:s}),e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[s?e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 bg-indigo-500/20 blur-2xl rounded-full animate-pulse"}),e.jsx(E,{size:48,className:"relative text-indigo-400 animate-spin"})]}):e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 bg-indigo-500/20 blur-2xl rounded-full"}),e.jsx(C,{size:48,className:"relative text-indigo-400"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-semibold text-white mb-1",children:s?"–ó–∞–≥—Ä—É–∑–∫–∞...":"–ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ —Ñ–∞–π–ª—ã —Å—é–¥–∞"}),e.jsx("p",{className:"text-sm text-white/50",children:s?"–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–¥–æ–∂–¥–∏—Ç–µ":"–∏–ª–∏ –Ω–∞–∂–º–∏—Ç–µ, —á—Ç–æ–±—ã –≤—ã–±—Ä–∞—Ç—å —Ñ–∞–π–ª—ã"})]}),!s&&e.jsx("button",{onClick:t=>{t.stopPropagation(),f()},className:"px-6 py-2.5 bg-indigo-500 hover:bg-indigo-600 text-white rounded-xl font-medium transition-colors",children:"–í—ã–±—Ä–∞—Ç—å —Ñ–∞–π–ª—ã"})]})]}),c&&e.jsxs("div",{className:"mt-4 p-4 bg-red-500/10 border border-red-500/20 rounded-xl flex items-start gap-3",children:[e.jsx(D,{size:20,className:"text-red-400 flex-shrink-0 mt-0.5"}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"text-sm font-medium text-red-400",children:c})})]}),e.jsxs("div",{className:"mt-6 p-4 bg-white/5 border border-white/10 rounded-xl",children:[e.jsx("h3",{className:"text-sm font-semibold text-white mb-2",children:"–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã:"}),e.jsxs("ul",{className:"text-xs text-white/60 space-y-1",children:[e.jsx("li",{children:"üìÑ –§–∞–π–ª—ã: TXT, MD"}),e.jsx("li",{children:"‚ö†Ô∏è –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞: 2MB"})]})]})]})]})});return T.createPortal(w,document.body)};export{_ as FileUploadModal};
